---
import Layout from '../layouts/Layout.astro';
import docsIndex from '../util/docsIndex';

export async function getStaticPaths() {
  // Pass slug as a single string; Astro catch-all expects primitive, not array.
  return docsIndex.docs.map(d => ({ params: { slug: d.slug }, props: { slug: d.slug } }));
}

const { slug } = Astro.props;
const doc = docsIndex.docs.find(d=>d.slug === slug);
if(!doc) throw new Error(`Doc not found: ${slug}`);
const sidebar = docsIndex.sidebar;
---
<Layout title={doc.frontmatter.title || doc.slug} {sidebar} currentPath={`/oas-mcp/${doc.slug}` }>
  <article>
    <h1>{doc.frontmatter.title || doc.slug}</h1>
    <Fragment set:html={doc.html} />
  </article>
</Layout>
